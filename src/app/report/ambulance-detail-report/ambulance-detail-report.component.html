<div class="container-flui mb-4" >
    <h2 class="text-center mb-3">Ambulance Report</h2>

    <!-- Date and Time Filter Section -->
    <div class="row mb-3">
        <!-- Date Filter -->
        <div class="col-md-3">
            <label for="fromDate" class="form-label">From Date</label>
            <input type="date" class="form-control" id="fromDate" [(ngModel)]="fromDate">
        </div>
        <div class="col-md-3">
            <label for="toDate" class="form-label">To Date</label>
            <input type="date" class="form-control" id="toDate" [(ngModel)]="toDate">
        </div>

        <!-- Time Filter -->
        <div class="col-md-2">
            <label for="fromTime" class="form-label">From Time</label>
            <input type="time" class="form-control" id="fromTime" [(ngModel)]="fromTime">
        </div>
        <div class="col-md-2">
            <label for="toTime" class="form-label">To Time</label>
            <input type="time" class="form-control" id="toTime" [(ngModel)]="toTime">
        </div>

        <div class="col-md-2 d-flex align-items-end">
            <button class="btn btn-primary" (click)="applyFilter()">Filter</button>
        </div>
    </div>

    <!-- Print Button -->
    <div class="row mb-3">
        <div class="col-md-6">
            <label for="nameSearch" class="form-label">Search Patient Name</label>
            <input type="text" id="nameSearch" [(ngModel)]="SearchData" class="form-control" placeholder="Enter patient name">
        </div>
      
        <div class="col-md-6 text-end mt-4">
            <div class="d-inline-block">
                <button class="btn" id="printBtn" (click)="openPrintWindow()">
                    <i class="bi bi-printer"></i> Print
                </button>
            </div>
            <!-- <div class="file-upload-wrapper d-inline-block mx-2">
                <label class="btn upload" for="fileUpload">
                    <i class="bi bi-file-earmark-spreadsheet"></i> Upload Xl
                </label>
                <input type="file" id="fileUpload" class="d-none" accept=".xls, .xlsx, .csv">
            </div> -->
        </div>
        
       
    </div>
 <!-- Search Section -->

 
 <!-- Patient Details Table -->
</div>
<div class="table-responsive" id="printSection">
    <table class="table table-bordered table-hover align-middle">
        <thead>
            <tr>
                <th scope="col">Sl No</th>
                <th scope="col">Date</th>
                <th scope="col">Time</th>
                <th scope="col">Patient Name</th>
                <th scope="col">From Medical</th>
                <th scope="col">Location</th>
                <th scope="col">State</th>
                <th scope="col">Dist</th>
                <th scope="col">Ambulance No</th>
                <th scope="col">Driver Name</th>
                <th scope="col">Entry By</th>
                <th scope="col">Updated By</th>
                <th scope="col">Patient Adhar No</th>
                <th scope="col">Other Id Type</th>
                <th scope="col">Other ID</th>
                <th scope="col">Mode Of Admission</th>
                <th scope="col">Admitted Area/Cabin</th>
                <th scope="col">Referred By</th>
                <th scope="col">Remarks</th>
                <th scope="col">Patient Mobile No</th>
                <th scope="col">Ip No</th>
                <th scope="col">Op No</th>
                <th scope="col">Department</th>
                <th scope="col">Fee</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let allAmbulanceData of allAmbulanceDatas | AmbulanceDetailsSearchPipe: SearchData; let i = index">
                <th scope="row">{{i+1}}</th>
                <td>{{allAmbulanceData?.date_of_visit}}</td>
                <td>{{allAmbulanceData?.arrival_time}}</td>
                <td>{{allAmbulanceData?.patient?.patient_name}}</td>
                <td>{{allAmbulanceData?.coming_from_which_hospital || '--'}}</td>
                <td>{{ allAmbulanceData?.location?.location || 'N/A' }}</td>
                <td>{{ allAmbulanceData?.location?.district?.state?.state_name || 'N/A' }}</td>
                <td>{{ allAmbulanceData?.location?.district?.dist_name || 'N/A' }}</td>
                <td>{{allAmbulanceData?.ambulance?.ambulance_number}}</td>
                <td>{{allAmbulanceData?.driver_name}}</td>
                <td>{{allAmbulanceData?.entry_by?.user_name}}</td>
                <td>{{allAmbulanceData?.updated_by?.user_name ||"NA"}}</td>
                <td>{{allAmbulanceData?.patient?.patient_name ||"NA"}}</td>
                <td>{{allAmbulanceData?.patient?.other_id_type ||"NA"}}</td>
                <td>{{allAmbulanceData?.patient?.other_id_no ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.modeofadmission?.mode_of_admission ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.admitted_area ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.referred_by ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.remarks ||"NA"}}</td>
                <td>{{allAmbulanceData?.patient?.mobile_number ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.ip ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.op ||"NA"}}</td>
                <td>{{allAmbulanceData?.hospitality?.departments?.department_name ||"NA"}}</td>
                <td>{{allAmbulanceData.payments?.payment_amount ||"NA"}}</td>
                
                
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="23" class="text-end fw-bold">Total Fee</td>
                <td class="fw-bold">{{ getTotalPayment() }}</td>
            </tr>
        </tfoot>
    </table>
</div>